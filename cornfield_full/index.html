<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Weather</title>
		<script src="//use.typekit.net/svb7vim.js" async="true"></script>
		<script>
			fetch('https://ipapi.co/json/?'+Math.floor(Date.now()/1.8e6)).then(res => res.json()).then(jsonData => {
				window.geoIPFetched = true;
				window.geoIPData = jsonData;
			}).catch(() => window.geoIPFetched = true);
			(function(){var tt=0,t=function(){try{Typekit.load()}catch(e){setTimeout(t,tt++<100?20:(tt*=2))}};t()})();
		</script>
		<link rel="preconnect" href="https://api.openweathermap.org">
		<link rel="preconnect" href="https://use.typekit.net">
		<meta name="description" content="Current weather in the field.">
		<meta name="viewport" content="width=device-width, viewport-fit=cover, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="apple-mobile-web-app-title" content="Weather">
		<link rel="apple-touch-icon" href="images/weather_icon.png">
		<link rel="icon" href="images/weather_icon.jpg" />
		<meta name="theme-color" content="#000000"/>
		<link rel="manifest" href="manifest.json">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
		<link rel="apple-touch-startup-image" href="weather_splash/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
		<meta name="msapplication-square70x70logo" content="weather_splash/mstile-icon-128.png">
		<meta name="msapplication-square150x150logo" content="weather_splash/mstile-icon-270.png">
		<meta name="msapplication-square310x310logo" content="weather_splash/mstile-icon-558.png">
		<meta name="msapplication-wide310x150logo" content="weather_splash/mstile-icon-558-270.png">
		<style>
			html {
				width: 100vw;
				height: 100vh;
				background: #000;
			}
			body {
				width: 100vw;
				height: 100vh;
				position: fixed;
				top: 0;
				left: 0;
				background: #000;
				overflow: hidden;
				/* user-select: none; */
				/* -webkit-user-select: none; */
				-webkit-tap-highlight-color: transparent;
			}
			* {
				/* -webkit-user-select: none; */
				/* user-select: none; */
				margin: 0;
			}

			body > canvas {
				position: absolute;
				left: 0;
				top: 0;
			}

			.daytime #weather-data,
			.daytime #location,
			.daytime #time-data
			{
				color: #000;
			}

			.daytime hr {
				background: rgba(0, 0, 0, 0.5);
			}

			.daytime #wind-direction-arrow polygon {
				fill: #000;
			}

			.daytime #my-location rect,
			.daytime #my-location #center
			{
				fill: #000;
			}

			.daytime #my-location #surround
			{
				stroke: #000;
			}

			#weather-data {
				color: white;
				position: absolute;
				top: 38px;
				right: 50px;
				font-family: 'Roboto Condensed', "roboto-condensed", Helvetica Neue, Segoe UI, sans-serif;
				font-weight: 100;
				font-size: 24px;
				text-align: right;
				box-sizing: border-box;
				transition: 0.1s opacity, 0.5s transform;
				/* text-shadow: 0px 0px 30px rgba(0,0,0,0.2); */
				z-index: 15;
				opacity: 0.8;
				margin-top: env(safe-area-inset-top);
				margin-right: env(safe-area-inset-right);
				min-width: 200px;
			}

			body {
				perspective: 100vw;
			}

			#weather-data {
				transform-origin: 50% 50%;
			}
			#weather-data.transition-start {
				transition: 0;
				transform: rotate3d(0.3, 1, 0.1, -35deg) translateX(44vw) translateY(5vh);
			}
			#weather-data.transition-show {
				transform: rotate3d(0.3, 1, 0.1, -35deg) translateX(-20vw) translateY(5vh);
			}
			#weather-data.transition-end {
				transform: rotate3d(0.0, 1, 0.0, 35deg) translateX(-100vw) translateZ(-50vw)
			}

			#time-data {
				color: white;
				position: absolute;
				top: 38px;
				left: 50px;
				z-index: 1;
				margin-top: env(safe-area-inset-top);
				margin-left: env(safe-area-inset-left);
				opacity: 0.8;
			}

			.spinner {
				position: absolute;
				top: 5px;
				right: -35px;
				opacity: 0;
				display: inline-block;
				width: 24px;
				height: 24px;
				background-position: 50% 50%;
				background-size: contain;
				background-repeat: no-repeat;
				background-image: url('data:image/svg+xml,<svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z" fill="white"/></svg>');
				animation: spin 0.5s infinite linear;
			}
			.daytime .spinner {
				background-image: url('data:image/svg+xml,<svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z" fill="black"/></svg>');
			}
			.fade-out .spinner,
			.locating .spinner
			{
				opacity: 1;
				transition: 0.5s;
			}
			@keyframes spin {
				0% {
					transform: rotate(0deg);
				}
				50% {
					transform: rotate(180deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}

			.fade-out hr,
			.fade-out #error,
			.fade-out #my-location
			{
				opacity: 0 !important;
				transition: 0.15s;
			}
			.fade-out #temperature,
			.fade-out #weather-desc-container,
			.fade-out #forecast,
			.fade-out #wind-data,
			.fade-out #weather-graph
			{
				opacity: 0 !important;
				height: 0 !important;
				overflow-y: hidden;
				overflow-x: visible;
				transition: 0.3s;
			}

			#weather-data > * {
				transition: 0.5s;
			}

			#location {
				text-transform: uppercase;
				background: transparent;
				border: 0;
				padding: 0;
				appearance: none;
				color: white;
				font-family: 'Roboto Condensed', "roboto-condensed", Helvetica Neue, Segoe UI, sans-serif;
				font-weight: 100;
				font-size: 24px;
				text-align: right;
				transition: 0.5s;
				outline: 0 !important;
				border-bottom: 1px solid transparent;
				margin-bottom: -1px;
				border-radius: 0;
				width: 284px;
			}

			#location:focus {
				border-bottom: 1px solid white;
			}
			#location::selection {
				background: #4489f1;
				color: white;
			}

			.daytime #location:focus {
				border-bottom-color: #000;
			}

			#my-location {
				position: absolute;
				right: -35px;
				top: 4px;
				transition: 0.5s;
				opacity: 0.5;
				cursor: pointer;
			}
			#my-location svg {
				width: 24px;
				height: 24px;
			}
			#my-location:hover,
			.current-location #my-location
			{
				opacity: 1;
			}
			.locating #my-location {
				transform: scale(0.01);
			}

			#my-location rect,
			#my-location #center
			{
				fill: white;
			}

			#my-location #surround
			{
				stroke: white;
			}

			#temperature {
				font-size: 120px;
				font-family: 'Proxima Nova', "proxima-nova", Helvetica Neue, Segoe UI, sans-serif;
				font-weight: bold;
				margin-bottom: -17px;
				margin-top: -3px;
				width: 600px;
				height: 144px;
				overflow-y: hidden;
				overflow-x: visible;
			}

			#temperature .wi {
				margin-right: 24px;
			}

			.min-temperature,
			.max-temperature
			{
				font-size: 45px;
				margin-left: 16px;
			}

			.max-temperature {
				position: absolute;
				margin-top: 19px;
			}

			#weather-desc-container {
				height: 32px;
				overflow-y: hidden;
				overflow-x: visible;
			}

			#wind-data {
				margin-top: 6px;
				margin-bottom: 15px;
				height: 32px;
				overflow-y: hidden;
				overflow-x: visible;
			}

			#wind-direction {
				display: inline-block;
				vertical-align: middle;
				margin-right: 5px;
			}

			#wind-direction svg {
				width: 30px;
				height: 30px;
			}

			hr {
				height: 1px;
				border: 0;
				background: rgba(255,255,255, 0.5);
				margin-top: 11px;
				margin-bottom: 11px;
				margin-left: 2px;
				margin-right: 2px;
				width: 284px;
				display: inline-block;
				transition: 0.2s 0.2s;
			}


			#come-birds,
			#fly-away,
			#i-see-you
			{
				display: none;
				position: absolute;
				text-align: center;
				left: 50%;
				top: 100px;
				width: 1000px;
				margin-left: -500px;
				font-size: 84px;
				color: white;
				text-shadow: 0px 0px 30px rgba(0,0,0,0.2);
				font-family: 'Proxima Nova', "proxima-nova", Helvetica Neue, Segoe UI, sans-serif;
				font-weight: 100;
				transition: 0.5s;
				z-index: 2;
				
			}

			#i-see-you
			{
				top: 10px;
				font-size: 36px;
			}

			#cities {
				display: none;
				position: absolute;
				top: 10px;
				left: 10px;
				opacity: 0;
				transition: 1s;
				color: white;
				font-family: 'Proxima Nova', "proxima-nova", Helvetica Neue, Segoe UI, sans-serif;
				font-weight: 200;
				font-size: 14px;
				z-index: 3;
				
			}

			#cities:hover {
				opacity: 1;
			}

			#city-names {
				width: 200px;
				height: 200px;
			}
			.weather #weather-data {
				display: none;
			}

			.audio-icon svg {
				width: 100%;
				height: 100%;
			}

			#fullscreen {
				position: fixed;
				z-index: 4;
				margin-right: env(safe-area-inset-right);
				margin-bottom: env(safe-area-inset-bottom);
				right: 50px;
				bottom: 50px;
				width: 24px;
				height: 24px;
				cursor: pointer;
				background: url('data:image/svg+xml;utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="white"><path d="M73.143,329.143H0V512h182.857v-73.143H73.143V329.143z M0,182.857h73.143V73.143h109.715V0H0V182.857z M438.857,438.857H329.143V512H512V329.143h-73.143V438.857z M329.143,0v73.143h109.715v109.715H512V0H329.143z"/></svg>') 0 0 / 100% no-repeat;
				transition: 0.5s;
				opacity: 0.5;
			}
			#fullscreen:active {
				opacity: 1 !important;
			}

			#audio-toggle {
				display: inline-block;
				width: 20px;
				height: 20px;
				cursor: pointer;
				margin-top: 0px;
				vertical-align: top;
				margin-left: 8px;
			}

			#audio {
				position: absolute;
				z-index: 4;
				margin-right: env(safe-area-inset-right);
				margin-bottom: env(safe-area-inset-bottom);
				right: 94px;
				bottom: 48px;
				font-size: 14px;
				font-family: 'Roboto Condensed', "roboto-condensed", Helvetica Neue, Segoe UI, sans-serif;
				font-weight: 100;
				color: white;
				opacity: 0.5;
				white-space: nowrap;
				display: none;
				
			}
			#audio .vol {
				transition: 0.5s;
			}
			#audio .vol:nth-child(3) {
				transition-delay: 0.1s;
			}
			#audio .vol:nth-child(4) {
				transition-delay: 0.2s;
			}
			#audio.paused .vol {
				opacity: 0;
			}
			#audio:active {
				opacity: 0.6;
			}
			.audio-info {
				opacity: 0;
				display: inline-block;
				transition: 0.5s;
			}
			#audio:hover .audio-info {
				opacity: 1;
			}
			#audio a {
				color: white;
			}
			#settings-toggle,
			#info-toggle
			{
				display: none;
				position: absolute;
				z-index: 2;
				right: 10px;
				opacity: 0.3;
				width: 20px;
				height: 20px;
				transition: 0.5s;
				cursor: pointer;
				color: white;
			}
			#settings-toggle:active,
			#info-toggle:active
			{
				opacity: 0.6;
			}
			#settings-toggle svg,
			#info-toggle svg
			{
				width: 100%;
				height: 100%;
			}
			#settings-toggle {
				top: 40px;
			}
			#info-toggle {
				display: block;
				display: none;
				margin-right: env(safe-area-inset-right);
				margin-bottom: env(safe-area-inset-bottom);
				bottom: 47px;
				right: 38px; /* 38 29 12+17 12+26 */
				opacity: 0.5;
			}

			.cn {
				font-family: Lantinghei SC, sans-serif;
			}
			.hide-text #weather-data {
				opacity: 0;
				pointer-events: none;
			}
			#forecast {
				vertical-align: top;
				margin-bottom: 8px;
				cursor: pointer;
				height: 128px;
				overflow-y: hidden;
				overflow-x: visible;
			}
			#forecast > span {
				display: inline-block;
				vertical-align: top;
				width: 52px;
				margin-left: 7px;
				text-align: center;
			}
			#forecast .weather-icon {
				display: inline-block;
				vertical-align: top;
				width: 24px;
				height: 24px;
				margin-top: 4px;
			}
			#error {
				text-align: right;
				display: none;
				padding: 3px 1px 4px 8px;
				border-radius: 4px;
				color: #ff8f00;
				margin-bottom: 8px;
				margin-top: 7px;
				font-variant: all-small-caps;
				font-weight: bold;
				position: absolute;
				width: 173px;
				right: 0px;
				top: 15px;
				font-size: 15px;
			}
			.error #error {
				display: inline-block;
			}
			.transition-0 {
				transition: 0;
			}
			#weather-graph {
				position: absolute;
				width: 300px;
				height: 300px;
				right: -45px;
				display: none;
			}
			.mad {
				display: block;
				position: fixed;
				left: 10px;
				bottom: 10px;
				width: 100vw;
				z-index: 100;
				font-family: sans-serif;
				font-size: small;
				line-height: 2;
			}
			.mad p {
				display: inline-block;
				margin-right: 8px;
			}
			.mad a {
				color: blue;
			}
			#clock {
				font-size: 120px;
				font-family: 'Proxima Nova', "proxima-nova", Helvetica Neue, Segoe UI, sans-serif;
				font-weight: 700;
				margin-bottom: -17px;
				margin-top: -3px;
				text-transform: uppercase;
			}
			#clock small.start {
				display: block;
			}
			#clock small.end {
				display: block;
				margin-top: -20px;
			}
			#date {
				font-size: 24px;
				font-family: 'Roboto Condensed', "roboto-condensed", Helvetica Neue, Segoe UI, sans-serif;
				font-weight: 100;
				text-transform: uppercase;
			}
			#time-data small {
				font-size: 50%;
			}
			@media (max-width: 1030px) {
				#time-data {
					top: 28px;
					transform: scale(0.9);
				    transform-origin: 0% 0%;
				}
				#weather-data {
					top: 28px;
					transform: scale(0.9);
				    transform-origin: 100% 0%;
					min-width: 380px;
				}
			}
			@media (max-width: 900px) {
				#time-data {
					display: none;
				}
			}
			@media (max-width: 800px) {
				#come-birds, #i-see-you, #fly-away {
					width: 320px;

					display: none;
				}
				#weather-data {
					top: 28px;
					transform: scale(0.65);
				    transform-origin: 100% 0%;
					min-width: 380px;
				}
				#time-data {
					display: none;
				}
			}
			@media (max-height: 278px) {
				#fullscreen {
					bottom: 16px;
					right: 16px;
				}
			}
			@media (max-height: 238px) {
				#fullscreen {
					display: none;
				}
			}

			:fullscreen #fullscreen {
				display: none;
			}
			:-webkit-full-screen #fullscreen {
				display: none;
			}
			@media all and (display-mode: fullscreen) {
				#fullscreen {
					display: none;
				}
			}
		</style>
		<link rel="stylesheet" href="weather-icons/css/weather-icons.min.css">
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-9MQXE9ZSL7"></script>
		<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-9MQXE9ZSL7');
		</script>
	</head>
	<body>
		<div id="time-data">
			<div id="date"></div>
			<div id="clock"></div>
		</div>
		<div id="settings-toggle">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -256 1792 1792" fill="#fff"><g transform="matrix(1,0,0,-1,121.49153,1285.4237)"><path d="m 1024,640 q 0,106 -75,181 -75,75 -181,75 -106,0 -181,-75 -75,-75 -75,-181 0,-106 75,-181 75,-75 181,-75 106,0 181,75 75,75 75,181 z m 512,109 V 527 q 0,-12 -8,-23 -8,-11 -20,-13 l -185,-28 q -19,-54 -39,-91 35,-50 107,-138 10,-12 10,-25 0,-13 -9,-23 -27,-37 -99,-108 -72,-71 -94,-71 -12,0 -26,9 l -138,108 q -44,-23 -91,-38 -16,-136 -29,-186 -7,-28 -36,-28 H 657 q -14,0 -24.5,8.5 Q 622,-111 621,-98 L 593,86 q -49,16 -90,37 L 362,16 Q 352,7 337,7 323,7 312,18 186,132 147,186 q -7,10 -7,23 0,12 8,23 15,21 51,66.5 36,45.5 54,70.5 -27,50 -41,99 L 29,495 Q 16,497 8,507.5 0,518 0,531 v 222 q 0,12 8,23 8,11 19,13 l 186,28 q 14,46 39,92 -40,57 -107,138 -10,12 -10,24 0,10 9,23 26,36 98.5,107.5 72.5,71.5 94.5,71.5 13,0 26,-10 l 138,-107 q 44,23 91,38 16,136 29,186 7,28 36,28 h 222 q 14,0 24.5,-8.5 Q 914,1391 915,1378 l 28,-184 q 49,-16 90,-37 l 142,107 q 9,9 24,9 13,0 25,-10 129,-119 165,-170 7,-8 7,-22 0,-12 -8,-23 -15,-21 -51,-66.5 -36,-45.5 -54,-70.5 26,-50 41,-98 l 183,-28 q 13,-2 21,-12.5 8,-10.5 8,-23.5 z"/></g></svg>
		</div>
		<div id="info-toggle" onclick="document.body.classList.toggle('hide-text')">
			<svg viewBox="-50 150 920 713" xmlns="http://www.w3.org/2000/svg" fill="#fff"><path d="M468.75 772.25l0 -348.75l-121.25 0l0 348.75l121.25 0zm-61.25 -410c40 0 71.25 -31.25 71.25 -72.5 0 -38.75 -31.25 -70 -71.25 -70s-71.25 31.25 -71.25 70c0 40 31.25 72.5 71.25 72.5zm-1.25 -268.75c223.75 0 406.25 181.25 406.25 406.25 0 223.75 -182.5 406.25 -406.25 406.25 -225 0 -406.25 -182.5 -406.25 -406.25 0 -225 181.25 -406.25 406.25 -406.25z"/></svg>
		</div>
		<div id="cities">
<textarea id="city-names">London
New York
Shanghai
Mumbai
Tokyo
Paris
San Francisco
Berlin
Rio de Janeiro
Moscow</textarea><br>
			<input type="checkbox" id="show-weather" checked onclick="document.body.classList.toggle('weather')"> <label for="show-weather">Show weather text</label><br>
		</div>
		<div id="weather-data" class="fade-out">
			<div id="error"></div>
			<div id="city-container"><div class="spinner"></div><input id="location" value="" aria-label="Location" spellcheck="false"></input><span id="my-location"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15"><circle id="surround" fill="none" stroke="#000000" stroke-miterlimit="10" cx="7.6" cy="7.5" r="5.4"/><rect x="7" width="1" height="1.9"/><rect x="7" y="13.1" width="1" height="1.9"/><rect x="13.1" y="7" width="1.9" height="1"/><rect x="0" y="7" width="1.9" height="1"/><circle id="center" cx="7.6" cy="7.5" r="3.5"/></svg></span></div>
			<div id="temperature"></div>
			<hr>
			<div id="forecast"></div>
			<div id="weather-desc-container"><span id="weather-desc"></span>, <span id="cloud-cover"><i class="wi wi-cloudy"></i></span></div>
			<div id="wind-data"><span id="wind-direction"><svg xmlns='http://www.w3.org/2000/svg' height='15' width='15' viewBox="0 0 15 15"><g id='wind-direction-arrow' transform='rotate(220 7.5 7.5)'><polygon points="0.2,7.4 14.8,11.1 11.4,7.4 14.8,3.7 " fill="white"/></g></svg></span><span id="wind-speed"><i class="wi wi-strong-wind"></i></span></div>
			<canvas id="weather-graph" width="1200" height="1200"></canvas>
		</div>
		<div id="fullscreen"></div>
		<script>
			try {
				navigator.serviceWorker.register('./sw.js', {scope: './'});
				var refreshing;
				navigator.serviceWorker.addEventListener('controllerchange',
					function() {
						if (refreshing) return;
						refreshing = true;
						window.location.reload();
					}
				);
			} catch(e) {
				console.error(e);
			}
			window.addEventListener('touchstart', function (ev) {
				ev.preventDefault();
			});
			window.addEventListener('touchmove', function (ev) {
				ev.preventDefault();
			});
		</script>
		<script type="text/glsl-vertex" id="corn-vert">
			attribute float afStalkIndex;
			
			uniform float ufGlobalTime;
			uniform float ufWindDirection;
			uniform float ufWindStrength;

			uniform float ufImpulse;
			uniform float ufGrassHeight;

			varying vec3 vpos;
			varying vec3 vnor;

			void main() {
				vec4 p = vec4(position, 1.0);
				vpos = position;
				vnor = normal;
				float a = 0.009*afStalkIndex+ufGlobalTime;
				float r = 0.5*pow(p.y/8.0, 2.0);
				float mag = (sin(afStalkIndex+ufGlobalTime*0.1) + r * (1.0-0.2*cos(a*4.0))) * 10.0 * ufWindStrength;
				float dir = ufWindDirection;

				float impulse = ufImpulse;
				p.x += mag * impulse * 16.0 * (normalize(position).x);
				p.y *= 1.0 + impulse * mag;
				p.z += mag * impulse * 16.0 * 1.0;

				p.y *= ufGrassHeight;
				if (ufGrassHeight < 0.01) {
					p.x = p.z = p.y = 0.0;
				}

				p.x += mag * cos(dir);
				p.z += mag * sin(dir);


				//p.y += r * cos(a);

				gl_Position = projectionMatrix * modelViewMatrix * p;
			}
		</script>
		<script type="text/glsl-fragment" id="corn-frag">
			precision highp float;
			precision mediump int;

			uniform float ufGlobalTime;
			uniform vec2 uv2Resolution;
			uniform mat4 um4CameraMatrix;
			uniform vec3 uv3CameraPosition;

			uniform float ufCloudCover;
			uniform float ufRainAmount;
			uniform float ufSunPosition;
			uniform float ufWindDirection;
			uniform float ufWindStrength;
			uniform float ufGrassHeight;
			uniform float ufPixelRatio;

			uniform sampler2D usRandomTex;

			varying vec3 vpos;
			varying vec3 vnor;

			float scene(vec3 p)
			{
				return p.y-(-2.0);
			}

			vec3 shadeBg(vec3 nml)
			{
				float aspect = uv2Resolution.x/uv2Resolution.y;
				vec3 bgLight = normalize(vec3(
			        -cos(ufSunPosition * 3.14159)*0.2*aspect,
					-sin(ufSunPosition * 3.14159)*0.6,
			        1.0
				));
				float skyPow = dot(nml, vec3(0.0, -1.0, 0.0));
				float sunDot = dot(bgLight, nml) * (skyPow > 0.0 ? 1.0 : smoothstep(-0.6, 0.0, skyPow));
				float sunSize = 0.0006;
				float sunAA = sunSize / 25.0;
			    float sunD = sunDot > (1.0-sunSize) ? 1.0 - max(0.0, 1.0/sunAA * (1.0-sunSize+sunAA - sunDot)) : 0.0;
				vec3 sun = vec3(6.5, 3.5, 2.0);
			    float centerPow = 0.0; //-dot(uv,uv);
			    float horizonPow = pow(1.0-abs(skyPow), 3.0)*(5.0+centerPow);
				float sunPow = sunDot;
				float sp = max(sunPow, 0.0);
			    float scattering = clamp(1.0 - abs(2.0*(-bgLight.y)), 0.0, 1.0);
				vec3 bgCol = max(0.0, skyPow)*2.0*vec3(0.8, 0.85, 0.9);
				bgCol += vec3(0.5,0.4,0.3)*(horizonPow);
				bgCol += sun*(sunD+pow( sp, max(256.0, abs(bgLight.y)*1024.0) ));
				bgCol += vec3(0.4,0.2,0.15)*(pow( sp, 16.0) + pow( sp, max(16.0, abs(bgLight.y)*256.0) ));
			    bgCol *= mix(vec3(0.7, 0.85, 0.95), vec3(1.0, 0.45, 0.1), scattering);

			    if (nml.y < 0.0) {
				    float cloud = 0.0;
				    bgCol = mix(bgCol, vec3(0.95-0.4*ufRainAmount), ufCloudCover*(1.0-cloud));
				    bgCol *= 1.0-cloud*ufCloudCover;
			    } else {
				    bgCol = mix(bgCol, vec3(0.95-0.4*ufRainAmount), ufCloudCover);
			    }

			    bgCol *= 1.0 - clamp(bgLight.y*3.0, 0.0, 0.6);
				return pow(max(vec3(0.0), bgCol), vec3(2.6));
			}

			vec3 project(vec3 v, mat4 e)
			{
				float d = 1.0 / ( e[0][ 3 ] * v.x + e[1][ 3 ] * v.y + e[2][ 3 ] * v.z + e[3][ 3 ] );
				return vec3(
					( e[ 0 ][0] * v.x + e[ 1 ][0] * v.y + e[ 2 ][0]  * v.z + e[ 3 ][0] ) * d,
					( e[ 0 ][1] * v.x + e[ 1 ][1] * v.y + e[ 2 ][1]  * v.z + e[ 3 ][1] ) * d,
					( e[ 0 ][2] * v.x + e[ 1 ][2] * v.y + e[ 2 ][2] * v.z + e[ 3 ][2] ) * d
				);
			}

			void main(void)
			{
				float aspect = uv2Resolution.x/uv2Resolution.y;
				vec3 bgLight = normalize(vec3(
			        -cos(ufSunPosition * 3.14159)*0.2*aspect,
					-sin(ufSunPosition * 3.14159)*0.6,
			        1.0
				));

				vec2 uv = (2.0 * (gl_FragCoord.xy*ufPixelRatio / uv2Resolution) - 1.0);
				vec3 d = normalize(project(vec3(uv, 1.0), um4CameraMatrix) - uv3CameraPosition);
				vec3 p = uv3CameraPosition;
			    vec3 bg = shadeBg(-d);
			    vec3 col = dot(vnor, vec3(-bgLight.x, -bgLight.y, bgLight.z)) * shadeBg(-reflect(d, vnor)) + abs(1.0-dot(vnor, d))*bg;
			    float fade = min(0.9, 0.2*abs(vpos.y));
			    if (ufGrassHeight < 0.1) {
			    	fade *= ufGrassHeight / 0.1;
			    }
				gl_FragColor = vec4( ( (1.0 - exp(-1.3 * col)) ), fade );
			}
		</script>
		<script type="text/glsl-fragment" id="corn-frag-simple">
			precision highp float;
			precision mediump int;

			uniform float ufGlobalTime;
			uniform vec2 uv2Resolution;
			uniform mat4 um4CameraMatrix;
			uniform vec3 uv3CameraPosition;

			uniform float ufCloudCover;
			uniform float ufRainAmount;
			uniform float ufSunPosition;
			uniform float ufWindDirection;
			uniform float ufWindStrength;
			uniform float ufGrassHeight;
			uniform float ufPixelRatio;

			uniform sampler2D usRandomTex;

			varying vec3 vpos;
			varying vec3 vnor;

			float scene(vec3 p)
			{
				return p.y-(-2.0);
			}

			vec3 shadeBg(vec3 nml)
			{
				float aspect = uv2Resolution.x/uv2Resolution.y;
				vec3 bgLight = normalize(vec3(
			        -cos(ufSunPosition * 3.14159)*0.2*aspect,
					-sin(ufSunPosition * 3.14159)*0.6,
			        1.0
				));
				vec3 sun = vec3(6.5, 3.5, 2.0);
				float skyPow = dot(nml, vec3(0.0, -1.0, 0.0));
			    float scattering = clamp(1.0 - abs(2.0*(-bgLight.y)), 0.0, 1.0);
				vec3 bgCol = max(0.0, skyPow)*2.0*vec3(0.8, 0.85, 0.9);
			    bgCol = mix(vec3(0.7, 0.85, 0.95), vec3(1.0, 0.45, 0.1), scattering);

			    if (nml.y < 0.0) {
				    float cloud = 0.0;
				    bgCol = mix(bgCol, vec3(0.95-0.4*ufRainAmount), ufCloudCover*(1.0-cloud));
				    bgCol *= 1.0-cloud*ufCloudCover;
			    } else {
				    bgCol = mix(bgCol, vec3(0.95-0.4*ufRainAmount), ufCloudCover);
			    }

			    bgCol *= 1.0 - clamp(bgLight.y*3.0, 0.0, 0.6);
				return pow(max(vec3(0.0), bgCol), vec3(2.6));
			}

			vec3 project(vec3 v, mat4 e)
			{
				float d = 1.0 / ( e[0][ 3 ] * v.x + e[1][ 3 ] * v.y + e[2][ 3 ] * v.z + e[3][ 3 ] );
				return vec3(
					( e[ 0 ][0] * v.x + e[ 1 ][0] * v.y + e[ 2 ][0]  * v.z + e[ 3 ][0] ) * d,
					( e[ 0 ][1] * v.x + e[ 1 ][1] * v.y + e[ 2 ][1]  * v.z + e[ 3 ][1] ) * d,
					( e[ 0 ][2] * v.x + e[ 1 ][2] * v.y + e[ 2 ][2] * v.z + e[ 3 ][2] ) * d
				);
			}

			void main(void)
			{
				float aspect = uv2Resolution.x/uv2Resolution.y;
				vec3 bgLight = normalize(vec3(
			        -cos(ufSunPosition * 3.14159)*0.2*aspect,
					-sin(ufSunPosition * 3.14159)*0.6,
			        1.0
				));

				vec2 uv = (2.0 * (gl_FragCoord.xy*ufPixelRatio / uv2Resolution) - 1.0);
				vec3 d = normalize(project(vec3(uv, 1.0), um4CameraMatrix) - uv3CameraPosition);
				vec3 p = uv3CameraPosition;
			    vec3 bg = shadeBg(-d);
			    vec3 col = dot(vnor, vec3(-bgLight.x, -bgLight.y, bgLight.z)) * shadeBg(-reflect(d, vnor)) + abs(1.0-dot(vnor, d))*bg;
			    float fade = min(0.9, 0.2*abs(vpos.y));
			    if (ufGrassHeight < 0.1) {
			    	fade *= ufGrassHeight / 0.1;
			    }
				gl_FragColor = vec4( ( (1.0 - exp(-1.3 * col)) ), fade );
			}
		</script>
		<script type="text/glsl-vertex" id="rain-vert">
			attribute float afDropIndex;

			uniform float ufGlobalTime;
			uniform float ufWindDirection;
			uniform float ufRainAmount;
			uniform float ufWindStrength;

			varying float opacity;
			varying float rainY;

			vec3 hash3( float n )
			{
			    return fract(sin(vec3(n,n+1.0,n+2.0))*vec3(43758.5453123,22578.1459123,19642.3490423));
			}

			void main() {
				vec4 p = vec4(position, 1.0);
				rainY = p.y;
				opacity = (ufRainAmount > 0.0 ? 0.5+0.5*ufRainAmount : 0.0);
				vec3 h = (hash3(afDropIndex)-vec3(0.5)) * 2000.0;
				float fallDisplacement = mod(sin(h.y+0.001*ufGlobalTime)*120.0 - 300.0*ufGlobalTime, 150.0+(h.x)/123.456);
				vec3 velocityVec = vec3(-ufWindStrength*2.0 * cos(ufWindDirection), 1.0, -ufWindStrength*2.0 * sin(ufWindDirection)) * fallDisplacement;
				float xoff = 8.0 * sin(h.x+0.001*ufGlobalTime) * 120.0;
				float yoff = -30.0;
				float zoff = abs(cos(h.z+0.001*ufGlobalTime)) * 120.0 - 100.0;
				p.xy *= 0.1;
				float yf = 40.0 + 150.0 * ufRainAmount;
				p.y *= yf;
				p.y += yoff;
				p.x += xoff + velocityVec.x * p.y * (1.75/150.0);
				p.z += zoff + velocityVec.z * p.y * (1.75/150.0);
				p.xyz += velocityVec;
				// gl_Position = p;
				gl_Position = projectionMatrix * modelViewMatrix * p;
			}
		</script>
		<script type="text/glsl-fragment" id="rain-frag">
			precision highp float;
			precision mediump int;

			uniform float ufGlobalTime;
			varying float opacity;
			varying float rainY;

			void main(void)
			{
			    vec3 col = vec3(1.0);
				gl_FragColor = vec4(clamp((0.5*gl_FragCoord.z), 0.0, 1.0)*col, (1.0 - abs(2.0*(0.5-rainY))) * 0.2 * opacity );
			}
		</script>
		<script type="text/glsl-vertex" id="bg-vert">
			void main() {
				gl_Position = vec4(position, 1.0);
			}
		</script>
		<script type="text/glsl-fragment" id="bg-frag">
			precision highp float;
			precision mediump int;

			uniform float ufGlobalTime;
			uniform vec2 uv2Resolution;
			uniform mat4 um4CameraMatrix;
			uniform vec3 uv3CameraPosition;

			uniform float ufCloudCover;
			uniform float ufRainAmount;
			uniform float ufSunPosition;
			uniform float ufWindDirection;
			uniform float ufWindStrength;

			uniform sampler2D usRandomTex;

			float noise( vec3 x )
			{
			    vec3 p = floor(x);
			    vec3 f = fract(x);
				f = f*f*(3.0-2.0*f);
				
				vec2 uv = (p.xy+vec2(37.0,17.0)*p.z) + f.xy;
				vec2 rg = texture2D( usRandomTex, (uv + 0.5)/256.0, -16.0 ).yx;
				return mix( rg.x, rg.y, f.z );
			}

			float map(vec3 p) {
			    vec3 q = vec3(0.2)*p + vec3(-cos(ufWindDirection), -0.2, -sin(ufWindDirection))*(ufGlobalTime*10.0*ufWindStrength);
			    float n = 0.0, f = 0.5;
			    n += f*noise(q); q *= 3.001; f *= 0.333;
			    n += f*noise(q); q *= 3.002; f *= 0.332;
			    n += f*noise(q); q *= 3.003; f *= 0.331;
				n += f*noise(q);
			    return n;
			}

			vec3 shadeBg(vec3 nml)
			{
				float aspect = uv2Resolution.x/uv2Resolution.y;
				vec3 bgLight = normalize(vec3(
			        -cos(ufSunPosition * 3.14159)*0.2*aspect,
					-sin(ufSunPosition * 3.14159)*0.6,
			        1.0
				));
				float skyPow = dot(nml, vec3(0.0, -1.0, 0.0));
				float sunDot = dot(bgLight, nml) * (skyPow > 0.0 ? 1.0 : smoothstep(-0.6, 0.0, skyPow));
				float sunSize = 0.0006;
				float sunAA = sunSize / 3.0;
			    float sunD = sunDot > (1.0-sunSize) ? 1.0 - max(0.0, 1.0/sunAA * (1.0-sunSize+sunAA - sunDot)) : 0.0;
				vec3 sun = vec3(6.5, 3.5, 2.0);
			    float centerPow = 0.0;
			    float horizonPow = pow(1.0-abs(skyPow), 3.0)*(5.0+centerPow);
				float sunPow = sunDot;
				float sp = max(sunPow, 0.0);
			    float scattering = clamp(1.0 - abs(2.0*(-bgLight.y)), 0.0, 1.0);
				vec3 bgCol = max(0.0, skyPow)*2.0*vec3(0.8, 0.85, 0.9);
				bgCol += vec3(0.3,0.4,0.5)*(horizonPow);
				bgCol += sun*(sunD+pow( sp, max(256.0, abs(bgLight.y)*1024.0) ));
				bgCol += vec3(0.4,0.2,0.15)*(pow( sp, 16.0) + pow( sp, max(16.0, abs(bgLight.y)*256.0) ));
			    bgCol *= mix(vec3(0.7, 0.85, 0.95), vec3(1.0, 0.45, 0.1), scattering);

			    if (nml.y < 0.0) {
				    float cc = 0.0;
				    if (ufCloudCover < 0.1) {
				        cc = 0.0 + 0.2 * (ufCloudCover - 0.0)/0.1;
				    } else if (ufCloudCover < 0.2) {
				        cc = 0.2 + 0.1 * (ufCloudCover - 0.1)/0.1;
				    } else if (ufCloudCover < 0.3) {
				        cc = 0.3 + 0.1 * (ufCloudCover - 0.2)/0.1;
				    } else if (ufCloudCover < 0.5) {
				        cc = 0.4 + 0.1 * (ufCloudCover - 0.3)/0.3;
				    } else if (ufCloudCover < 0.75) {
				        cc = 0.5 + 0.2 * pow((ufCloudCover - 0.5)/0.25, 2.0);
				    } else {
				        cc = 0.7 + 0.75 * pow((ufCloudCover - 0.75)/0.25, 2.0);
				    }
				    float cloud = 0.0;
				    cloud += min(1.0, (1.0-smoothstep(0.0, cc, map(nml*5.0/nml.y)))) * 0.8;
				    cloud += min(1.0, (1.0-smoothstep(0.0, cc, map(nml*15.0/nml.y)))) * 0.3;
				    cloud *= pow(abs(nml.y), 1.0);
				    bgCol = mix(bgCol, vec3(0.95-0.4*ufRainAmount), cloud);
				    bgCol *= 1.0+cloud;
			    } else {
				    bgCol = mix(bgCol, vec3(0.95-0.4*ufRainAmount), ufCloudCover);
			    }

			    bgCol *= 1.0 - clamp(bgLight.y*3.0, 0.0, 0.6);
				return pow(max(vec3(0.0), bgCol), vec3(2.6));
			}

			vec3 project(vec3 v, mat4 e)
			{
				float d = 1.0 / ( e[0][ 3 ] * v.x + e[1][ 3 ] * v.y + e[2][ 3 ] * v.z + e[3][ 3 ] );
				return vec3(
					( e[ 0 ][0] * v.x + e[ 1 ][0] * v.y + e[ 2 ][0]  * v.z + e[ 3 ][0] ) * d,
					( e[ 0 ][1] * v.x + e[ 1 ][1] * v.y + e[ 2 ][1]  * v.z + e[ 3 ][1] ) * d,
					( e[ 0 ][2] * v.x + e[ 1 ][2] * v.y + e[ 2 ][2] * v.z + e[ 3 ][2] ) * d
				);
			}

			float scene(vec3 p)
			{
				return p.y-(-2.0); //-map(p)*0.001;
			}

			vec3 normal(vec3 p, float d)
			{
			return vec3(0.0, 1.0, 0.0);
//				float e = 0.05;
//				float dx = scene(vec3(e, 0.0, 0.0) + p) - d;
//				float dy = scene(vec3(0.0, e, 0.0) + p) - d;
//				float dz = scene(vec3(0.0, 0.0, e) + p) - d;
//				return normalize(vec3(dx, dy, dz));
			}

			void main(void)
			{
				vec2 uv = (2.0 * (gl_FragCoord.xy / uv2Resolution) - 1.0);
				vec3 d = normalize(project(vec3(uv, 1.0), um4CameraMatrix) - uv3CameraPosition);
				vec3 p = uv3CameraPosition;
			    vec3 tr = vec3(1.0);
			    if (d.y < 0.0) {
			        float dist = -2.0 / d.y - p.y / d.y; // p.y + d.y * dist = -2.0;
			        p += d * dist;
			        vec3 nml = normal(p, 0.0);
			        float f = pow(1.0-dot(d, -vec3(0.0, 1.0, 0.0)), 5.0);
			        nml = mix(nml, vec3(0.0, 1.0, 0.0), f);
			        d = reflect(d, nml);
			        tr *= mix(0.5*vec3(0.5, 0.9, 0.75), vec3(1.0), f);
			    }
			    vec3 col = tr * shadeBg(-d);
			    vec4 noise = (texture2D(usRandomTex, mod(gl_FragCoord.xy/256.0, 1.0))-0.5) / 64.0;
				gl_FragColor = vec4(noise.rgb + (1.0 - exp(-1.3 * col)), 1.0 );
			}
		</script>
		<script src="js/lib/three.js"></script>
		<script src="js/corngeneration.js"></script>
		<script src="js/corn.js"></script>
		<script src="js/rain.js"></script>
		<script src="js/weatherdata.js"></script>
		<script src="js/weathertick.js"></script>
		<script src="js/particles.js"></script>
		<script src="js/birds.js"></script>
		<script src="js/impacts.js"></script>
		<!-- <script src="js/kinect-ws.js"></script> -->
		<!-- <script src="js/microphone.js"></script> -->
		<script src="js/corn_algo_doodle.js"></script>
	</body>
</html>
